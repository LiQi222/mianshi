<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç®€å†é¢è¯•é—®é¢˜ç”Ÿæˆå™¨</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif; background-color: #f4f7f6; color: #333; line-height: 1.6; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; }
        .container { width: 100%; max-width: 800px; margin: 0 auto; background-color: #ffffff; padding: 20px 40px; border-radius: 12px; box-shadow: 0 4px 25px rgba(0, 0, 0, 0.08); box-sizing: border-box; }
        header { text-align: center; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        h1 { color: #2c3e50; font-weight: 700; }
        h2 { color: #34495e; border-left: 4px solid #3498db; padding-left: 15px; }
        .form-group { margin-bottom: 25px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; color: #555; }
        input[type="file"], textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; transition: border-color 0.3s, box-shadow 0.3s; }
        button { display: block; width: 100%; padding: 15px; background: linear-gradient(45deg, #3498db, #2980b9); color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4); }
        button:disabled { background: #bdc3c7; cursor: not-allowed; box-shadow: none; transform: none; }
        #results-container { margin-top: 30px; padding: 20px; background-color: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; }
        .spinner-container { text-align: center; padding: 40px 0; color: #555; font-weight: 500; }
        .spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 15px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¤– AI ç®€å†é¢è¯•é—®é¢˜ç”Ÿæˆå™¨</h1>
            <p>ä¸Šä¼ ç®€å†å’Œç›®æ ‡èŒä½ï¼ŒAI ä¸ºæ‚¨é‡èº«æ‰“é€ é¢è¯•é—®é¢˜ã€‚</p>
        </header>
        <form id="resume-form">
            <div class="form-group">
                <label for="resume-file">1. ä¸Šä¼ æ‚¨çš„ç®€å† (ä»…æ”¯æŒPDFæ ¼å¼)</label>
                <input type="file" id="resume-file" name="resume" accept=".pdf" required>
            </div>
            <div class="form-group">
                <label for="job-description">2. (å¯é€‰) ç²˜è´´ç›®æ ‡å²—ä½æè¿°</label>
                <textarea id="job-description" name="jd" rows="8" placeholder="å°†èŒä½æè¿°ç²˜è´´åˆ°è¿™é‡Œï¼Œå¯ä»¥ç”Ÿæˆæ›´å…·é’ˆå¯¹æ€§çš„é—®é¢˜..."></textarea>
            </div>
            <button type="submit" id="submit-btn">âœ¨ ç”Ÿæˆé¢è¯•é—®é¢˜</button>
        </form>
        <div id="loading" class="spinner-container" style="display: none;">
            <div class="spinner"></div>
            <p>AI æ­£åœ¨æ·±åº¦åˆ†ææ‚¨çš„ç®€å†ï¼Œè¯·ç¨å€™...</p>
        </div>
        <div id="results-container" style="display: none;">
            <h2>ğŸ’¡ AI ç”Ÿæˆçš„é¢è¯•é—®é¢˜</h2>
            <div id="results"></div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('resume-form');
            const submitBtn = document.getElementById('submit-btn');
            const loadingSpinner = document.getElementById('loading');
            const resultsContainer = document.getElementById('results-container');
            const resultsDiv = document.getElementById('results');
            form.addEventListener('submit', async (event) => {
                event.preventDefault();
                const resumeFile = document.getElementById('resume-file').files[0];
                const jobDescription = document.getElementById('job-description').value;
                if (!resumeFile) { alert('è¯·å…ˆä¸Šä¼ æ‚¨çš„ç®€å†æ–‡ä»¶ã€‚'); return; }
                submitBtn.disabled = true;
                submitBtn.innerText = "åˆ†æä¸­...";
                loadingSpinner.style.display = 'block';
                resultsContainer.style.display = 'none';
                const formData = new FormData();
                formData.append('resume', resumeFile);
                formData.append('jd', jobDescription);
                try {
                    // è¯·æ±‚åœ°å€æ— éœ€ä¿®æ”¹ï¼Œä¾ç„¶æ˜¯ç›¸å¯¹è·¯å¾„
                    const response = await fetch('/analyze', { method: 'POST', body: formData });
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error || 'æœåŠ¡å™¨å‘ç”ŸæœªçŸ¥é”™è¯¯');
                    }
                    const data = await response.json();
                    resultsDiv.innerHTML = marked.parse(data.questions);
                    resultsContainer.style.display = 'block';
                } catch (error) {
                    resultsDiv.innerHTML = `<p style="color: #ea3535; font-weight: bold;">å‘ç”Ÿé”™è¯¯: ${error.message}</p><p>è¯·æ£€æŸ¥æ‚¨çš„Pythonåç«¯æœåŠ¡æ˜¯å¦å·²æ­£ç¡®è¿è¡Œï¼Œå¹¶ä¸”APIå¯†é’¥å·²é…ç½®ã€‚</p>`;
                    resultsContainer.style.display = 'block';
                } finally {
                    loadingSpinner.style.display = 'none';
                    submitBtn.disabled = false;
                    submitBtn.innerText = "âœ¨ ç”Ÿæˆé¢è¯•é—®é¢˜";
                }
            });
        });
    </script>
</body>
</html>
